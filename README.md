# üçΩÔ∏è –ü–∏—Ç–∞–Ω–∏–µ+ | –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —à–∫–æ–ª—å–Ω–æ–π —Å—Ç–æ–ª–æ–≤–æ–π

–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –≤–µ–±-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —à–∫–æ–ª—å–Ω–æ–π —Å—Ç–æ–ª–æ–≤–æ–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∞–±–æ–Ω–µ–º–µ–Ω—Ç–æ–≤, –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –∞–ª–ª–µ—Ä–≥–µ–Ω–æ–≤ –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å—é.

---

## üìã –í–≤–µ–¥–µ–Ω–∏–µ

**–ü–∏—Ç–∞–Ω–∏–µ+** ‚Äî —ç—Ç–æ full-stack –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —à–∫–æ–ª—å–Ω–æ–π —Å—Ç–æ–ª–æ–≤–æ–π, –∫–æ—Ç–æ—Ä–æ–µ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —É—á–µ–Ω–∏–∫–æ–≤, –ø–æ–≤–∞—Ä–æ–≤ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –≤ –µ–¥–∏–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ. –°–∏—Å—Ç–µ–º–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- ‚úÖ –¶–∏—Ñ—Ä–æ–≤–æ–µ –º–µ–Ω—é —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (–ó–∞–≤—Ç—Ä–∞–∫–∏/–û–±–µ–¥—ã)
- ‚úÖ –°–∏—Å—Ç–µ–º—É –∞–±–æ–Ω–µ–º–µ–Ω—Ç–æ–≤ —Å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–º–∏ –ª–∏–º–∏—Ç–∞–º–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–ª–ª–µ—Ä–≥–µ–Ω–æ–≤ –≤ –±–ª—é–¥–∞—Ö
- ‚úÖ –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
- ‚úÖ –û—á–µ—Ä–µ–¥—å –≤—ã–¥–∞—á–∏ –±–ª—é–¥ –¥–ª—è –ø–æ–≤–∞—Ä–æ–≤
- ‚úÖ –§–∏–Ω–∞–Ω—Å–æ–≤—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É –∏ –æ—Ç—á—ë—Ç—ã –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- ‚úÖ –°–∏—Å—Ç–µ–º—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è –≤—Å–µ—Ö —Ä–æ–ª–µ–π
- ‚úÖ –ë–∞–∑–æ–≤–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- Backend: Python 3 + Flask
- Database: SQLite
- Frontend: Alpine.js + Tailwind CSS
- Security: Werkzeug (password hashing) + Cryptography (Fernet)

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.8+
- pip (–º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤ Python)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```bash
pip install flask werkzeug cryptography
```

2. **–ü–æ–º–µ—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é:**
```
–ø—Ä–æ–µ–∫—Ç/
‚îú‚îÄ‚îÄ app.py                 # Backend —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îî‚îÄ‚îÄ index.html        # Frontend –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îî‚îÄ‚îÄ canteen_full.db       # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Å–æ–∑–¥–∞—Å—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
```bash
python app.py
```

4. **–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä:**
```
http://127.0.0.1:8008
```

### –¢–µ—Å—Ç–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã

| –†–æ–ª—å          | –õ–æ–≥–∏–Ω | –ü–∞—Ä–æ–ª—å | –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏                    |
|---------------|-------|--------|--------------------------------|
| –£—á–µ–Ω–∏–∫        | `a`   | `1`    | –ë–∞–ª–∞–Ω—Å 1000‚ÇΩ, –∫–ª–∞—Å—Å 9–ê        |
| –ü–æ–≤–∞—Ä         | `aa`  | `1`    | –û–¥–æ–±—Ä–µ–Ω–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç            |
| –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä | `aaa` | `1`    | –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø                 |
| –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä | `admin` | `123` | –°–∏—Å—Ç–µ–º–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç           |

---

## üë§ –†–æ–ª–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### üéì –£–ß–ï–ù–ò–ö

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏:**
- **–ú–µ–Ω—é –¥–Ω—è** ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –∏ –ø–æ–∫—É–ø–∫–∞ –±–ª—é–¥
- **–ê–±–æ–Ω–µ–º–µ–Ω—Ç** ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã—Ö –Ω–∞–±–æ—Ä–æ–≤
- **–ó–∞–∫–∞–∑—ã** ‚Äî –∏—Å—Ç–æ—Ä–∏—è –ø–æ–∫—É–ø–æ–∫
- **–ö–æ—à–µ–ª—ë–∫** ‚Äî –±–∞–ª–∞–Ω—Å –∏ –ø–æ–∫—É–ø–∫–∞ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–æ–≤
- **–ú–æ—è –∫–∞—Ä—Ç–∞** ‚Äî –ø—Ä–∏–≤—è–∑–∫–∞ –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç—ã
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** ‚Äî —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- **–ê–ª–ª–µ—Ä–≥–∏–∏** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è
- **–û—Ç–∑—ã–≤—ã** ‚Äî –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –ø–æ –±–ª—é–¥–∞–º

#### –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:

**1. –ü–æ–∫—É–ø–∫–∞ –±–ª—é–¥ (–ú–µ–Ω—é –¥–Ω—è):**
```
–î–µ–π—Å—Ç–≤–∏–µ: –í—ã–±–æ—Ä –±–ª—é–¥–∞ ‚Üí –ù–∞–∂–∞—Ç–∏–µ "–ö—É–ø–∏—Ç—å"
‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞
‚Üì
–°–ø–∏—Å–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤
‚Üì
–£–º–µ–Ω—å—à–µ–Ω–∏–µ –ø–æ—Ä—Ü–∏–π –≤ —Å–∫–ª–∞–¥–µ
‚Üì
–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "–û–ø–ª–∞—á–µ–Ω–æ"
‚Üì
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —É—á–µ–Ω–∏–∫—É
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è: –í—Å–µ / –ó–∞–≤—Ç—Ä–∞–∫–∏ / –û–±–µ–¥—ã
- –°–∏—Å—Ç–µ–º–∞ –∞–ª–ª–µ—Ä–≥–µ–Ω–æ–≤: –∫—Ä–∞—Å–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –æ–ø–∞—Å–Ω—ã—Ö –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –ø–æ—Ä—Ü–∏–π
- –í–∏–∑—É–∞–ª—å–Ω—ã–π –æ–≤–µ—Ä–ª–µ–π "–ö—É–ø–ª–µ–Ω–æ!" –ø–æ—Å–ª–µ –ø–æ–∫—É–ø–∫–∏

**2. –ê–±–æ–Ω–µ–º–µ–Ω—Ç—ã:**

**üåÖ –ó–∞–≤—Ç—Ä–∞–∫–∏ (3300‚ÇΩ):**
```
–ü—Ä–∞–≤–∏–ª–æ: 1 –±–ª—é–¥–æ (–ø–µ—Ä–≤–æ–µ –ò–õ–ò –≤—Ç–æ—Ä–æ–µ) + 1 –Ω–∞–ø–∏—Ç–æ–∫
–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: 1 —Ä–∞–∑ –≤ –¥–µ–Ω—å
–°–ø–∏—Å–∞–Ω–∏–µ —Å –±–∞–ª–∞–Ω—Å–∞: 0‚ÇΩ (–ø–ª–∞—Ç–∏—Ç –∞–±–æ–Ω–µ–º–µ–Ω—Ç)
```

**üçΩÔ∏è –û–±–µ–¥—ã (5500‚ÇΩ):**
```
–ü—Ä–∞–≤–∏–ª–æ: 1 –ø–µ—Ä–≤–æ–µ + 1 –≤—Ç–æ—Ä–æ–µ + 1 –Ω–∞–ø–∏—Ç–æ–∫
–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: 1 —Ä–∞–∑ –≤ –¥–µ–Ω—å
–°–ø–∏—Å–∞–Ω–∏–µ —Å –±–∞–ª–∞–Ω—Å–∞: 0‚ÇΩ (–ø–ª–∞—Ç–∏—Ç –∞–±–æ–Ω–µ–º–µ–Ω—Ç)
```

**–ü—Ä–æ—Ü–µ—Å—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```
–ü–æ–∫—É–ø–∫–∞ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞ (–ö–æ—à–µ–ª—ë–∫)
‚Üì
–í—ã–±–æ—Ä —Ç–∏–ø–∞ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞ (–ó–∞–≤—Ç—Ä–∞–∫/–û–±–µ–¥)
‚Üì
–í—ã–±–æ—Ä –±–ª—é–¥ –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º
‚Üì
–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
‚Üì
–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ (price = 0)
‚Üì
–ó–∞–ø–∏—Å—å –≤ subscription_usage
‚Üì
–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
```

**3. –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞:**
- –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–∞—è –±–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞
- –î–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã —à–∏—Ñ—Ä—É—é—Ç—Å—è –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
- CVV –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Å–∏—Å—Ç–µ–º–µ

**4. –ê–ª–ª–µ—Ä–≥–µ–Ω—ã:**
```
–ù–∞—Å—Ç—Ä–æ–π–∫–∞:
–õ–∞–∫—Ç–æ–∑–∞, –û—Ä–µ—Ö–∏, –ì–ª—é—Ç–µ–Ω, –Ø–π—Ü–∞, –¶–∏—Ç—Ä—É—Å, –ú–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç—ã + —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ
‚Üì
–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ users.allergies
‚Üì
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –º–µ–Ω—é
‚Üì
–í–∏–∑—É–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:
  - –ö—Ä–∞—Å–Ω–∞—è —Ä–∞–º–∫–∞ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ –±–ª—é–¥–∞
  - –ö—Ä–∞—Å–Ω—ã–µ –±–µ–π–¥–∂–∏ —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –∞–ª–ª–µ—Ä–≥–µ–Ω–æ–≤
  - –ü—É–ª—å—Å–∏—Ä—É—é—â–µ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
  - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ
```

---

### üë®‚Äçüç≥ –ü–û–í–ê–†

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏:**
- **–û—á–µ—Ä–µ–¥—å** ‚Äî –≤—ã–¥–∞—á–∞ –æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
- **–°–∫–ª–∞–¥** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–Ω—é –∏ –ø–æ—Ä—Ü–∏—è–º–∏
- **–£—á—ë—Ç** ‚Äî –∏—Å—Ç–æ—Ä–∏—è –≤—ã–¥–∞–Ω–Ω—ã—Ö –±–ª—é–¥
- **–ó–∞–∫—É–ø–∫–∏** ‚Äî –∑–∞—è–≤–∫–∏ –Ω–∞ –ø–æ–∫—É–ø–∫—É –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** ‚Äî –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –æ—Ç –∞–¥–º–∏–Ω–∞

#### –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:

**1. –í—ã–¥–∞—á–∞ –∑–∞–∫–∞–∑–æ–≤ (–û—á–µ—Ä–µ–¥—å):**
```
–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ: –í—Å–µ –∑–∞–∫–∞–∑—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "–û–ø–ª–∞—á–µ–Ω–æ"
‚Üì
–ù–∞–∂–∞—Ç–∏–µ "–í—ã–¥–∞—Ç—å"
‚Üì
–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞: "–û–ø–ª–∞—á–µ–Ω–æ" ‚Üí "–í—ã–¥–∞–Ω–æ"
‚Üì
–ó–∞–ø–∏—Å—å –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–¥–∞—á–∏ (issuedAt)
‚Üì
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —É—á–µ–Ω–∏–∫—É
‚Üì
–í–∏–∑—É–∞–ª—å–Ω—ã–π –æ–≤–µ—Ä–ª–µ–π "–í—ã–¥–∞–Ω–æ!"
```

**2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫–ª–∞–¥–æ–º:**

**–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–ª—é–¥–∞:**
```
–ü–æ–ª—è:
- –ù–∞–∑–≤–∞–Ω–∏–µ
- –¶–µ–Ω–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ä—Ü–∏–π
- –ö–∞—Ç–µ–≥–æ—Ä–∏—è (–ó–∞–≤—Ç—Ä–∞–∫/–û–±–µ–¥)
- –¢–∏–ø (–ü–µ—Ä–≤–æ–µ/–í—Ç–æ—Ä–æ–µ/–°–∞–ª–∞—Ç/–í—ã–ø–µ—á–∫–∞/–ù–∞–ø–∏—Ç–æ–∫/–ó–∞–∫—É—Å–∫–∞)
- –°–æ—Å—Ç–∞–≤ (–¥–ª—è –¥–µ—Ç–µ–∫—Ü–∏–∏ –∞–ª–ª–µ—Ä–≥–µ–Ω–æ–≤)
‚Üì
–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ menu
‚Üì
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤—Å–µ–º —É—á–µ–Ω–∏–∫–∞–º –æ –Ω–æ–≤–æ–º –±–ª—é–¥–µ
```

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ä—Ü–∏—è–º–∏:**
```
–ö–Ω–æ–ø–∫–∏ +/- —Ä—è–¥–æ–º —Å –∫–∞–∂–¥—ã–º –±–ª—é–¥–æ–º
‚Üì
UPDATE menu SET portions = –Ω–æ–≤–æ–µ_–∑–Ω–∞—á–µ–Ω–∏–µ
‚Üì
–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —É—á–µ–Ω–∏–∫–∞–º–∏
```

**3. –£—á—ë—Ç –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤:**
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —Å –µ–¥–∏–Ω–∏—Ü–∞–º–∏ –∏–∑–º–µ—Ä–µ–Ω–∏—è
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –Ω–∞ —Å–∫–ª–∞–¥–µ
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: `ingredients`

**4. –ó–∞—è–≤–∫–∏ –Ω–∞ –∑–∞–∫—É–ø–∫–∏:**
```
–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏:
–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞ + –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ + –¶–µ–Ω–∞
‚Üì
INSERT INTO purchases (status = "–û–∂–∏–¥–∞–µ—Ç")
‚Üì
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É
‚Üì
–û–∂–∏–¥–∞–Ω–∏–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è
‚Üì
–ü–æ–ª—É—á–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ä–µ—à–µ–Ω–∏–∏ –∞–¥–º–∏–Ω–∞
```

---

### üë®‚Äçüíº –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏:**
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** ‚Äî —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
- **–ü–µ—Ä—Å–æ–Ω–∞–ª** ‚Äî –æ–¥–æ–±—Ä–µ–Ω–∏–µ –ø–æ–≤–∞—Ä–æ–≤
- **–û—Ç—á—ë—Ç—ã** ‚Äî –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –∏ —ç–∫—Å–ø–æ—Ä—Ç
- **–ó–∞—è–≤–∫–∏** ‚Äî –æ–¥–æ–±—Ä–µ–Ω–∏–µ –∑–∞–∫—É–ø–æ–∫
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** ‚Äî —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è

#### –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:

**1. –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞:**

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
```sql
–ü–æ–ª—É—á–µ–Ω–æ (–≤—Å–µ–≥–æ) = 
  SUM(orders.price WHERE status='–í—ã–¥–∞–Ω–æ') + 
  SUM(sub_transactions.amount)

–ó–∞—Ç—Ä–∞—á–µ–Ω–æ = 
  SUM(purchases.price WHERE status='–û–¥–æ–±—Ä–µ–Ω–æ')

–ü—Ä–∏–±—ã–ª—å = –ü–æ–ª—É—á–µ–Ω–æ - –ó–∞—Ç—Ä–∞—á–µ–Ω–æ

–ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å (%) = 
  (COUNT(orders WHERE status='–í—ã–¥–∞–Ω–æ') / COUNT(orders)) * 100
```

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–æ—Ö–æ–¥–∞:**
- –ü—Ä–æ–¥–∞–∂–∞ –±–ª—é–¥ (–ø–æ —Ñ–∞–∫—Ç—É –≤—ã–¥–∞—á–∏)
- –ê–±–æ–Ω–µ–º–µ–Ω—Ç—ã (–ø–æ —Ñ–∞–∫—Ç—É –ø–æ–∫—É–ø–∫–∏)

**2. –û–¥–æ–±—Ä–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞:**
```
–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–≤–∞—Ä–∞
‚Üì
INSERT users (role='chef', isApproved=0)
‚Üì
–ü–æ—è–≤–ª–µ–Ω–∏–µ –≤ –æ—á–µ—Ä–µ–¥–∏ "–ü–µ—Ä—Å–æ–Ω–∞–ª"
‚Üì
–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä: "–û–¥–æ–±—Ä–∏—Ç—å" –∏–ª–∏ "–£–¥–∞–ª–∏—Ç—å"
‚Üì
–ï—Å–ª–∏ –æ–¥–æ–±—Ä–µ–Ω–æ:
  UPDATE users SET isApproved=1
  + –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–≤–∞—Ä—É
‚Üì
–ü–æ–≤–∞—Ä –º–æ–∂–µ—Ç –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
```

**3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫—É–ø–∫–∞–º–∏:**

**–ü—Ä–æ—Ü–µ—Å—Å –æ–¥–æ–±—Ä–µ–Ω–∏—è:**
```
–ó–∞—è–≤–∫–∞ –æ—Ç –ø–æ–≤–∞—Ä–∞ (status = "–û–∂–∏–¥–∞–µ—Ç")
‚Üì
–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ "–ó–∞—è–≤–∫–∏" —Å —Å—É–º–º–æ–π
‚Üì
–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –≤—ã–±–∏—Ä–∞–µ—Ç:

[–û–¥–æ–±—Ä–∏—Ç—å]:
  UPDATE purchases SET status='–û–¥–æ–±—Ä–µ–Ω–æ'
  + –£–≤–µ–ª–∏—á–µ–Ω–∏–µ stat_purchaseExpense
  + –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–≤–∞—Ä—É
  + –ó–µ–ª—ë–Ω—ã–π –æ–≤–µ—Ä–ª–µ–π "–û–¥–æ–±—Ä–µ–Ω–æ!"

[–ó–∞–ø—Ä–µ—Ç–∏—Ç—å]:
  UPDATE purchases SET status='–ó–∞–ø—Ä–µ—â–µ–Ω–æ'
  + –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–≤–∞—Ä—É
  + –ö—Ä–∞—Å–Ω—ã–π –æ–≤–µ—Ä–ª–µ–π "–ó–∞–ø—Ä–µ—â–µ–Ω–æ!"
```

**–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫—É–ø–æ–∫:**
- –¢–∞–±–ª–∏—Ü–∞ —Å –æ–¥–æ–±—Ä–µ–Ω–Ω—ã–º–∏ –∏ –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–º–∏ –∑–∞—è–≤–∫–∞–º–∏
- –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤
- –û–±—â–∞—è —Å—É–º–º–∞ –æ–¥–æ–±—Ä–µ–Ω–Ω—ã—Ö –∑–∞–∫—É–ø–æ–∫

**4. –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ—Ç—á—ë—Ç—ã:**

**–≠–∫—Å–ø–æ—Ä—Ç CSV:**
```
–ù–∞–∂–∞—Ç–∏–µ "–°–∫–∞—á–∞—Ç—å CSV"
‚Üì
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–∞ —Å —Ä–∞–∑–¥–µ–ª–∞–º–∏:
  - –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Å–≤–æ–¥–∫–∞
  - –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–æ—Ö–æ–¥–∞
  - –†–∞—Å—Ö–æ–¥—ã
  - –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–∫–∞–∑–æ–≤ (–¥–∞—Ç–∞, —É—á–µ–Ω–∏–∫, –∫–ª–∞—Å—Å, –±–ª—é–¥–æ, —Ü–µ–Ω–∞, —Å—Ç–∞—Ç—É—Å)
  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
‚Üì
–°–∫–∞—á–∏–≤–∞–Ω–∏–µ: –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π_–æ—Ç—á–µ—Ç_DD-MM-YYYY.csv
```

---

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü

**users** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
```sql
username TEXT PRIMARY KEY    -- –õ–æ–≥–∏–Ω (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
password TEXT                 -- –•—ç—à –ø–∞—Ä–æ–ª—è (pbkdf2-sha256)
fullName TEXT                 -- –§–ò–û
role TEXT                     -- student / chef / admin
school TEXT                   -- –ù–∞–∑–≤–∞–Ω–∏–µ —à–∫–æ–ª—ã
grade TEXT                    -- –ö–ª–∞—Å—Å (—Ç–æ–ª—å–∫–æ –¥–ª—è —É—á–µ–Ω–∏–∫–æ–≤)
phone TEXT                    -- –¢–µ–ª–µ—Ñ–æ–Ω (–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω)
email TEXT                    -- Email (–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω)
balance REAL                  -- –ë–∞–ª–∞–Ω—Å (–¥–ª—è —É—á–µ–Ω–∏–∫–æ–≤)
allergies TEXT                -- –ê–ª–ª–µ—Ä–≥–µ–Ω—ã —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é
isApproved INTEGER            -- –û–¥–æ–±—Ä–µ–Ω –ª–∏ –ø–æ–≤–∞—Ä (0/1)
cardNumber TEXT               -- –ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã (–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω)
cardHolder TEXT               -- –î–µ—Ä–∂–∞—Ç–µ–ª—å –∫–∞—Ä—Ç—ã (–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω)
cardExpiry TEXT               -- –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è MM/YY
```

**menu** ‚Äî –º–µ–Ω—é –±–ª—é–¥
```sql
id INTEGER PRIMARY KEY
name TEXT                     -- –ù–∞–∑–≤–∞–Ω–∏–µ –±–ª—é–¥–∞
price REAL                    -- –¶–µ–Ω–∞
portions INTEGER              -- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ä—Ü–∏–π
type TEXT                     -- –ü–µ—Ä–≤–æ–µ/–í—Ç–æ—Ä–æ–µ/–°–∞–ª–∞—Ç/–í—ã–ø–µ—á–∫–∞/–ù–∞–ø–∏—Ç–æ–∫/–ó–∞–∫—É—Å–∫–∞
category TEXT                 -- –ó–∞–≤—Ç—Ä–∞–∫ / –û–±–µ–¥
ingredients TEXT              -- –°–æ—Å—Ç–∞–≤ –¥–ª—è –¥–µ—Ç–µ–∫—Ü–∏–∏ –∞–ª–ª–µ—Ä–≥–µ–Ω–æ–≤
addedDate TEXT                -- ISO –¥–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
```

**orders** ‚Äî –∑–∞–∫–∞–∑—ã
```sql
id INTEGER PRIMARY KEY
user TEXT                     -- username —É—á–µ–Ω–∏–∫–∞
name TEXT                     -- –ù–∞–∑–≤–∞–Ω–∏–µ –±–ª—é–¥–∞
price REAL                    -- –¶–µ–Ω–∞ (0 –¥–ª—è –∞–±–æ–Ω–µ–º–µ–Ω—Ç–æ–≤)
status TEXT                   -- –û–ø–ª–∞—á–µ–Ω–æ / –í—ã–¥–∞–Ω–æ
allergies TEXT                -- –ê–ª–ª–µ—Ä–≥–µ–Ω—ã —É—á–µ–Ω–∏–∫–∞ –Ω–∞ –º–æ–º–µ–Ω—Ç –∑–∞–∫–∞–∑–∞
issuedAt TEXT                 -- –í—Ä–µ–º—è –≤—ã–¥–∞—á–∏ (HH:MM)
createdAt TEXT                -- ISO –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
```

**purchases** ‚Äî –∑–∞—è–≤–∫–∏ –Ω–∞ –∑–∞–∫—É–ø–∫–∏
```sql
id INTEGER PRIMARY KEY
item TEXT                     -- –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
qty TEXT                      -- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ
price REAL                    -- –°—Ç–æ–∏–º–æ—Å—Ç—å
status TEXT                   -- –û–∂–∏–¥–∞–µ—Ç / –û–¥–æ–±—Ä–µ–Ω–æ / –ó–∞–ø—Ä–µ—â–µ–Ω–æ
```

**sub_transactions** ‚Äî –ø–æ–∫—É–ø–∫–∏ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–æ–≤
```sql
user TEXT                     -- username
type TEXT                     -- –ó–∞–≤—Ç—Ä–∞–∫–∏ / –û–±–µ–¥—ã
amount REAL                   -- –°—É–º–º–∞
time TEXT                     -- ISO –¥–∞—Ç–∞ –ø–æ–∫—É–ø–∫–∏
```

**subscription_usage** ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–æ–≤
```sql
id INTEGER PRIMARY KEY
user TEXT                     -- username
subType TEXT                  -- –ó–∞–≤—Ç—Ä–∞–∫–∏ / –û–±–µ–¥—ã
date TEXT                     -- YYYY-MM-DD
dishesUsed TEXT               -- –ù–∞–∑–≤–∞–Ω–∏—è –±–ª—é–¥ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é
createdAt TEXT                -- ISO –¥–∞—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```

**notifications** ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```sql
title TEXT                    -- –ó–∞–≥–æ–ª–æ–≤–æ–∫
text TEXT                     -- –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
type TEXT                     -- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (–¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è)
toUser TEXT                   -- –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (username)
toRole TEXT                   -- –†–æ–ª—å (student/chef/admin)
time TEXT                     -- –í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏ (HH:MM)
```

**ingredients** ‚Äî —Å–∫–ª–∞–¥ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤
```sql
id INTEGER PRIMARY KEY
name TEXT                     -- –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
amount REAL                   -- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ
unit TEXT                     -- –ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è (–∫–≥, –ª, —à—Ç)
```

**reviews** ‚Äî –æ—Ç–∑—ã–≤—ã –Ω–∞ –±–ª—é–¥–∞
```sql
dish TEXT                     -- –ù–∞–∑–≤–∞–Ω–∏–µ –±–ª—é–¥–∞
text TEXT                     -- –¢–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞
author TEXT                   -- –§–ò–û –∞–≤—Ç–æ—Ä–∞
```

---

## üîÑ –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### 1. –ü–æ–∫—É–ø–∫–∞ –±–ª—é–¥–∞ —É—á–µ–Ω–∏–∫–æ–º

```
FRONTEND (–£—á–µ–Ω–∏–∫)
  ‚Üì –ù–∞–∂–∞—Ç–∏–µ "–ö—É–ø–∏—Ç—å"
  ‚Üì fetch('/api/action', {type: 'buy', user, menuId, allergies})
  ‚Üì
BACKEND (app.py)
  ‚Üì –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞: users.balance >= menu.price
  ‚Üì –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ü–∏–π: menu.portions > 0
  ‚Üì UPDATE users SET balance = balance - price
  ‚Üì UPDATE menu SET portions = portions - 1
  ‚Üì INSERT INTO orders (status='–û–ø–ª–∞—á–µ–Ω–æ')
  ‚Üì INSERT INTO notifications (toUser)
  ‚Üì db.commit()
  ‚Üì return {ok: true}
  ‚Üì
FRONTEND
  ‚Üì –ü–æ–∫–∞–∑ –æ–≤–µ—Ä–ª–µ—è "–ö—É–ø–ª–µ–Ω–æ!"
  ‚Üì –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (fetch('/api/sync'))
  ‚Üì –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
  ‚Üì –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ—Ä—Ü–∏–π
```

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞

```
FRONTEND
  ‚Üì –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–ó–∞–≤—Ç—Ä–∞–∫–∏/–û–±–µ–¥—ã)
  ‚Üì –í—ã–±–æ—Ä –±–ª—é–¥ –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º (1+1 –∏–ª–∏ 1+1+1)
  ‚Üì –í–∞–ª–∏–¥–∞—Ü–∏—è: canUseSubscription()
  ‚Üì fetch('/api/action', {type: 'use_subscription', dishes: [id1, id2, ...]})
  ‚Üì
BACKEND
  ‚Üì –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞: SELECT * FROM sub_transactions
  ‚Üì –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–µ–≥–æ–¥–Ω—è: SELECT * FROM subscription_usage WHERE date=today
  ‚Üì –ï—Å–ª–∏ –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª:
  ‚Üì   –¶–∏–∫–ª –ø–æ dishes:
  ‚Üì     UPDATE menu SET portions = portions - 1
  ‚Üì     INSERT INTO orders (price=0, status='–û–ø–ª–∞—á–µ–Ω–æ')
  ‚Üì   INSERT INTO subscription_usage
  ‚Üì   INSERT INTO notifications
  ‚Üì   return {ok: true}
  ‚Üì
FRONTEND
  ‚Üì Toast "–ì–æ—Ç–æ–≤–æ!"
  ‚Üì –û—á–∏—Å—Ç–∫–∞ –≤—ã–±–æ—Ä–∞
  ‚Üì –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
  ‚Üì –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```

### 3. –û–¥–æ–±—Ä–µ–Ω–∏–µ –∑–∞–∫—É–ø–∫–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º

```
FRONTEND (–ü–æ–≤–∞—Ä)
  ‚Üì –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏ (item, qty, price)
  ‚Üì fetch('/api/action', {type: 'add_purchase'})
  ‚Üì
BACKEND
  ‚Üì INSERT INTO purchases (status='–û–∂–∏–¥–∞–µ—Ç')
  ‚Üì INSERT INTO notifications (toRole='admin')
  ‚Üì
FRONTEND (–ê–¥–º–∏–Ω)
  ‚Üì –í–∏–¥–∏—Ç –≤ "–ó–∞—è–≤–∫–∏" –Ω–æ–≤—É—é –∑–∞—è–≤–∫—É
  ‚Üì –ù–∞–∂–∞—Ç–∏–µ "–û–¥–æ–±—Ä–∏—Ç—å" –∏–ª–∏ "–ó–∞–ø—Ä–µ—Ç–∏—Ç—å"
  ‚Üì fetch('/api/action', {type: 'approve_purchase' | 'reject_purchase', id})
  ‚Üì
BACKEND
  ‚Üì UPDATE purchases SET status='–û–¥–æ–±—Ä–µ–Ω–æ'/'–ó–∞–ø—Ä–µ—â–µ–Ω–æ'
  ‚Üì INSERT INTO notifications (toRole='chef')
  ‚Üì
FRONTEND (–ü–æ–≤–∞—Ä)
  ‚Üì –ü–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ sync
  ‚Üì –í–∏–¥–∏—Ç —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏ –≤ "–ó–∞–∫—É–ø–∫–∏"
```

### 4. –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

```
–°–æ–∑–¥–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–ª—é–±–æ–µ —Å–æ–±—ã—Ç–∏–µ):
  INSERT INTO notifications (title, text, toUser/toRole, time)
  ‚Üì
–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (–∫–∞–∂–¥—ã–µ 10 —Å–µ–∫ + –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è):
  SELECT * FROM notifications
  ‚Üì
–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ:
  IF toUser == currentUser.username ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å
  IF toRole == currentUser.role ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å
  ‚Üì
–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:
  - –ö—Ä–∞—Å–Ω–∞—è —Ç–æ—á–∫–∞ –Ω–∞ –≤–∫–ª–∞–¥–∫–µ "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"
  - –¶–≤–µ—Ç–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ (–∑–µ–ª—ë–Ω—ã–µ/–∫—Ä–∞—Å–Ω—ã–µ/—Å–∏–Ω–∏–µ/–æ—Ä–∞–Ω–∂–µ–≤—ã–µ)
  - –ò–∫–æ–Ω–∫–∏ –ø–æ —Ç–∏–ø—É —Å–æ–±—ã—Ç–∏—è
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã

**1. –•—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π:**
```python
# –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
password_hash = generate_password_hash(password)
# –ê–ª–≥–æ—Ä–∏—Ç–º: pbkdf2:sha256

# –ü—Ä–∏ –≤—Ö–æ–¥–µ
if check_password_hash(stored_hash, input_password):
    # –î–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à—ë–Ω
```

**2. –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:**
```python
# –ö–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è (Fernet AES-128)
ENCRYPTION_KEY = os.environ.get('ENCRYPTION_KEY') or Fernet.generate_key()

# –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
encrypted = cipher.encrypt(data.encode()).decode()

# –î–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏ sync/login)
decrypted = cipher.decrypt(encrypted.encode()).decode()
```

**–ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—è:**
- `users.phone`
- `users.email`
- `users.cardNumber`
- `users.cardHolder`

**CVV –∫–∞—Ä—Ç—ã:** –ù–ï —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ë–î (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø—Ä–∏–≤—è–∑–∫–µ)

**3. –ó–∞—â–∏—Ç–∞ –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π:**
```python
# –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
db.execute("SELECT * FROM users WHERE username = ?", (username,))
# –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è —Å—Ç—Ä–æ–∫
```

**4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞:**
- –ü–æ–≤–∞—Ä –Ω–µ –º–æ–∂–µ—Ç –≤–æ–π—Ç–∏ –ø–æ–∫–∞ `isApproved = 0`
- –ö–∞–∂–¥–∞—è —Ä–æ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –≤–∫–ª–∞–¥–∫–∏
- API –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

---

## üìä API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### GET /api/sync
–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö

**Response:**
```json
{
  "menu": [...],
  "orders": [...],
  "users": [...],
  "ingredients": [...],
  "purchases": [...],
  "reviews": [...],
  "notifications": [...],
  "subTransactions": [...],
  "subscriptionUsage": [...]
}
```

### POST /api/login
–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É

**Request:**
```json
{
  "username": "a",
  "password": "1"
}
```

**Response (success):**
```json
{
  "username": "a",
  "fullName": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  "role": "student",
  "balance": 1000,
  "allergies": "–õ–∞–∫—Ç–æ–∑–∞, –û—Ä–µ—Ö–∏",
  ...
}
```

### POST /api/register
–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**Request:**
```json
{
  "username": "newuser",
  "password": "pass123",
  "fullName": "–ò–º—è –§–∞–º–∏–ª–∏—è",
  "role": "student",
  "school": "–ì–ë–û–£ –®–∫–æ–ª–∞ ‚Ññ656",
  "grade": "10–ê",
  "phone": "+7 999 999-99-99",
  "email": "user@example.com"
}
```

### POST /api/action
–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π

**–¢–∏–ø—ã –¥–µ–π—Å—Ç–≤–∏–π (`type`):**

**–£—á–µ–Ω–∏–∫:**
- `buy` ‚Äî –ø–æ–∫—É–ø–∫–∞ –±–ª—é–¥–∞
- `use_subscription` ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞
- `buy_sub` ‚Äî –ø–æ–∫—É–ø–∫–∞ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞
- `refill` ‚Äî –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
- `save_card` ‚Äî –ø—Ä–∏–≤—è–∑–∫–∞ –∫–∞—Ä—Ç—ã
- `remove_card` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã
- `save_profile` ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–ª–ª–µ—Ä–≥–µ–Ω–æ–≤
- `add_review` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–∞
- `confirm_order` ‚Äî –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ "–Ø –ø–æ–µ–ª(–∞)"

**–ü–æ–≤–∞—Ä:**
- `add_menu_item` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–ª—é–¥–∞
- `update_stock` ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—Ü–∏–π
- `add_ing` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–∞
- `set_ing` ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–∞
- `add_purchase` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏ –Ω–∞ –∑–∞–∫—É–ø–∫—É
- `confirm_order` ‚Äî –≤—ã–¥–∞—á–∞ –∑–∞–∫–∞–∑–∞

**–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä:**
- `approve_chef` ‚Äî –æ–¥–æ–±—Ä–µ–Ω–∏–µ –ø–æ–≤–∞—Ä–∞
- `reject_chef` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏ –ø–æ–≤–∞—Ä–∞
- `approve_purchase` ‚Äî –æ–¥–æ–±—Ä–µ–Ω–∏–µ –∑–∞–∫—É–ø–∫–∏
- `reject_purchase` ‚Äî –∑–∞–ø—Ä–µ—Ç –∑–∞–∫—É–ø–∫–∏

---

## üé® –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞

- **üîµ –°–∏–Ω–∏–π** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç, –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- **üü¢ –ó–µ–ª—ë–Ω—ã–π** ‚Äî —É—Å–ø–µ—Ö, –æ–¥–æ–±—Ä–µ–Ω–∏–µ, –æ–±–µ–¥—ã
- **üü† –û—Ä–∞–Ω–∂–µ–≤—ã–π** ‚Äî –∑–∞–≤—Ç—Ä–∞–∫–∏, –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- **üî¥ –ö—Ä–∞—Å–Ω—ã–π** ‚Äî –æ—à–∏–±–∫–∏, –∑–∞–ø—Ä–µ—Ç—ã, –∞–ª–ª–µ—Ä–≥–µ–Ω—ã
- **‚ö´ –°–µ—Ä—ã–π** ‚Äî –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã

### –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã

**–û–≤–µ—Ä–ª–µ–∏:**
- "–ö—É–ø–ª–µ–Ω–æ!" ‚Äî –∑–µ–ª—ë–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç —Å –≥–∞–ª–æ—á–∫–æ–π
- "–í—ã–¥–∞–Ω–æ!" ‚Äî —Å–∏–Ω–∏–π –≥—Ä–∞–¥–∏–µ–Ω—Ç
- "–û–¥–æ–±—Ä–µ–Ω–æ!" ‚Äî –∑–µ–ª—ë–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç
- "–ó–∞–ø—Ä–µ—â–µ–Ω–æ!" ‚Äî –∫—Ä–∞—Å–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç

**Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**
- –ü–æ—è–≤–ª—è—é—Ç—Å—è —Å–ø—Ä–∞–≤–∞ –≤–≤–µ—Ä—Ö—É
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å—á–µ–∑–∞—é—Ç —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
- 4 —Ç–∏–ø–∞: success, error, warning, info

**–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏:**
- –°–ø–∏–Ω–Ω–µ—Ä—ã –Ω–∞ –≤—Å–µ—Ö –∫–Ω–æ–ø–∫–∞—Ö –ø—Ä–∏ async –æ–ø–µ—Ä–∞—Ü–∏—è—Ö
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –Ω–∞–∂–∞—Ç–∏–π

---

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å:

```
[LOGIN] ‚úÖ –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥: a (student)
[BUY] ‚úÖ –ü–æ–∫—É–ø–∫–∞: a –∫—É–ø–∏–ª –ë–æ—Ä—â —É–∫—Ä–∞–∏–Ω—Å–∫–∏–π
[SUB_USE] ‚úÖ –ê–±–æ–Ω–µ–º–µ–Ω—Ç –û–±–µ–¥—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω: a ‚Äî –°—É–ø, –ö–æ—Ç–ª–µ—Ç–∞, –ö–æ–º–ø–æ—Ç
[PURCHASE] ‚úÖ –ó–∞–∫—É–ø–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∞: ID 5 - –ö–∞—Ä—Ç–æ—Ñ–µ–ª—å –Ω–∞ 500‚ÇΩ
[CARD] ‚úÖ –ö–∞—Ä—Ç–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ (–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–∞) –¥–ª—è a: **** 4242
```

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π –∫–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è

```bash
# Linux/Mac
export ENCRYPTION_KEY="–≤–∞—à_32_–±–∞–π—Ç–Ω—ã–π_–∫–ª—é—á_–≤_base64"

# Windows
set ENCRYPTION_KEY=–≤–∞—à_32_–±–∞–π—Ç–Ω—ã–π_–∫–ª—é—á_–≤_base64
```

–ò–ª–∏ –≤ –∫–æ–¥–µ `app.py` –∑–∞–º–µ–Ω–∏—Ç–µ:
```python
ENCRYPTION_KEY = os.environ.get('ENCRYPTION_KEY') or Fernet.generate_key()
```

### 2. –û—Ç–∫–ª—é—á–∏—Ç–µ DEBUG —Ä–µ–∂–∏–º

```python
app.run(debug=False, host='0.0.0.0', port=8008)
```

### 3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS

–ü–æ–ª—É—á–∏—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (Let's Encrypt) –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ:
```python
app.run(ssl_context=('cert.pem', 'key.pem'))
```

### 4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î

```bash
# –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±—ç–∫–∞–ø
cp canteen_full.db backups/canteen_$(date +%Y%m%d).db
```

---

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### "ModuleNotFoundError: No module named 'cryptography'"
```bash
pip install cryptography
```

### "ModuleNotFoundError: No module named 'flask'"
```bash
pip install flask
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –Ω–µ –∑–∞–ø—É—â–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–ø–∏–π app.py
pkill -f app.py
python app.py
```

### –°—Ç–∞—Ä—ã–µ –ø–∞—Ä–æ–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```
–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —Å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º —Å—Ç–∞—Ä—ã–µ –ø–∞—Ä–æ–ª–∏ –±—É–¥—É—Ç –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã.
–†–µ—à–µ–Ω–∏–µ: –£–¥–∞–ª–∏—Ç–µ canteen_full.db –∏ –ø–æ–∑–≤–æ–ª—å—Ç–µ —Å–∏—Å—Ç–µ–º–µ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –ë–î.
```

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ª–∏ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
2. ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —É–∫–∞–∑–∞–Ω –ø—É—Ç—å –∫ `templates/index.html`
3. ‚úÖ –°–≤–æ–±–æ–¥–µ–Ω –ª–∏ –ø–æ—Ä—Ç 8008
4. ‚úÖ –ó–∞–ø—É—â–µ–Ω –ª–∏ —Å–µ—Ä–≤–µ—Ä (`python app.py`)

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –≤ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª—è—Ö.

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2026-02-04